<!doctype html>
<html ng-app="OnePlayer" ng-controller="OneControll" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="./stylesheets/material.css">
<link rel="stylesheet" type="text/css" href="./stylesheets/material.min.css">
<link rel="stylesheet" type="text/css" href="./stylesheets/layout.css">
<title id="title">OnePlayer</title>
<style>

</style>
<script src="javascripts/material.js"></script>
<script src="javascripts/material.min.js"></script>
<script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>

<script> 
	var app = angular.module('OnePlayer', []);
	app.controller('OneControll', function($scope) {
	$scope.hot_songs= [
	{"name": "几个你",
    "singer": "薛之谦",
	"url":"music/薛之谦 - 几个你.mp3",
	"lrc":"[00:00.00] 作曲 : 薛之谦\n[00:01.00] 作词 : 薛之谦\n[00:19.520]买醉过几个夜晚 喝几杯咖啡 和几个人聊天\n[00:29.650]我搬过几个地址 谈几次恋爱 偶尔给你邮件\n[00:39.490]我听过几种音乐 配几种画面 偶尔还是流泪\n[00:49.650]放纵过几个黑夜 尽力的狂欢 在青春快逝去\n[00:59.960]车速要开到多少 往哪个方向 才能追回你\n[01:13.080]我去过几个城市 有几个地址 仿佛能听见你\n[01:23.380]为什么折磨自己 也折磨着你 也许你不在意\n[01:33.350]旧朋友几次提起 有你的消息 说谁在照顾你\n[01:43.220]我还要遇见几个你 才可以忘记你\n[01:58.240]我还要拒绝几个你 才可以不想起\n[02:08.540]这城市怎么都是你 可你在哪里\n[02:18.450]这世界怎么都是你 原来你住在我心里\n[02:31.350]\n[02:40.590]车速要开到多少 往哪个方向 才能追回你\n[02:49.360]我去过几个城市 有几个地址 仿佛能听见你\n[03:00.820]为什么折磨自己 也折磨着你 也许你不在意\n[03:11.150]旧朋友几次提起 还是你的消息 是谁在陪着你\n[03:20.310]我还要遇见几个你 才可以忘记你\n[03:29.890]我还要拒绝几个你 才可以不想起\n[03:41.190]这城市怎么都是你 可你在哪里\n[03:51.170]这世界怎么都是你 原来你住在我的心里\n[04:04.410]\n[04:07.820]我还要遇见几个你 才可以忘记你\n[04:18.240]我还要拒绝几个你 才可以不想起\n[04:28.450]这城市怎么都是你 可你在哪里\n[04:38.490]这世界怎么都是你 原来你住在我心里\n[04:51.650]\n",
	},
    {"name": "Battles and Wastelands",
     "singer": "Neo Retros",
	 "url":"music/Neo Retros - Battles and Wastelands.mp3",
	 "lrc":"[00:11.460]Deep magical trees murmuring breeze, carry me home\n[00:15.940]Tell stories of hope, hope there's a light\n[00:21.230]Tight energy thieves laying their wreaths outside unmarked doors\n[00:26.550]A war is just a recourse to show that we're bored\n[00:31.470]Battles and wastelands, battles and wastelands in me\n[00:36.880]Magical tree where nobody grieves the island, I see\n[00:41.850]Battles and wastelands, battles and wastelands in me\n[00:47.030]Magical tree where nobody grieves, the island I see is in me\n[00:59.120]Poor tourist you're lost you're just a cost to average man\n[01:03.390]A plan leads to a plan and you're told that you can\n[01:08.300]You can be just who you want be what you feel, be someone real\n[01:14.320]Climb high to excess, and you'll be a success\n[01:18.930]Battles and wastelands, battles and wastelands in me\n[01:24.520]Magical tree where nobody grieves the island, I see\n[01:29.520]Battles and wastelands, battles and wastelands in me\n[01:34.640]Magical tree where nobody grieves, the island I see is in me\n[02:01.100]Battles and wastelands, battles and wastelands in me\n[02:06.100]Magical tree where nobody grieves the island, I see\n[02:11.460]Battles and wastelands, battles and wastelands in me\n[02:16.890]Magical tree where nobody grieves, the island I see is in me\n",
	 },
    {"name": "Stardust",
     "singer": "Mika",
	 "url":"music/Mika - Stardust.mp3",
	 "lrc":"[00:03.200]I could be staring at somebody new\n[00:07.510]\n[00:10.840]Stuck in my head is a picture of you\n[00:14.240]\n[00:14.860]You are the thunder, I was the rain\n[00:19.340]\n[00:19.690]I wanna know if I'll see you again\n[00:22.300]\n[00:23.070]I said I love you, you said goodbye\n[00:26.380]\n[00:26.990]Everything changes in the blink of an eye\n[00:29.930]\n[00:30.310]It's been a while, I still carry the flame\n[00:34.000]\n[00:34.950]I wanna know if I'll see you again\n[00:37.350]\n[00:38.650]See you again, see you again\n[00:40.690]\n[00:40.970]Vieni con me,\n[00:42.600]\n[00:43.470]Vieni con me\n[00:46.260]\n[00:46.650]Io rester¨° qui ferma finch¨¦\n[00:49.890]\n[00:50.420]Tu non vorrai stare con me\n[00:53.560]\n[00:53.960]\n[00:54.340]I could put a little stardust in your eyes\n[00:57.840]\n[00:58.320]Put a little sunshine in your life\n[01:00.380]\n[01:02.090]Give me a little hope you'll feel the same\n[01:05.740]\n[01:06.120]And I wanna know will I see you again\n[01:09.510]\n[01:10.100]Will I see you again\n[01:11.580]I've seen that before, cause you're not even there\n[01:12.730]\n[01:13.210]\n[01:13.910]\n[01:14.220]I'm writing this song and you don't even care\n[01:17.170]\n[01:17.960]Throw me a lifeline and open the door\n[01:19.820]\n[01:21.610]And pick up my heart that you left on the floor\n[01:24.980]\n[01:26.090]On the floor\n[01:27.630]\n[01:29.890]On the floor\n[01:32.780]\n[01:33.360]\n[01:33.740]Io rester¨° qui ferma finch¨¦\n[01:37.100]\n[01:37.710]Tu non vorrai stare con me\n[01:40.370]\n[01:41.120]\n[01:41.410]I could put a little stardust in your eyes\n[01:44.660]\n[01:45.220]Put a little sunshine in your life\n[01:47.970]\n[01:48.930]Give me a little hope you'll feel the same\n[01:51.390]\n[01:53.250]And I wanna know will I see you again\n[01:55.240]\n[01:57.080]\n[01:57.860]Call me all the time is rushing by\n[02:00.860]\n[02:01.180]And all the little things we leave behind\n[02:03.660]\n[02:04.670]But even that everything I do,\n[02:08.280]\n[02:08.980]Is a little bit of me, a little bit of you\n[02:11.960]\n[02:12.580]When will I see you again?\n[02:15.730]\n[02:16.510]When will I see you again?\n[02:19.410]\n[02:20.320]When will I see you again?\n[02:23.410]\n[02:24.070]When will I see you again?\n[02:26.880]\n[02:30.790]Ohohohohoh...\n[02:32.430]\n[02:32.670]Ohohohohoh...\n[02:33.430]\n[02:33.950]Ohohohohoh...\n[02:35.400]\n[02:35.820]When will I see you again?\n[02:37.890]\n[02:38.180]Ohohohohoh...\n[02:39.320]\n[02:39.980]Ohohohohoh...\n[02:41.070]\n[02:41.430]Ohohohohoh...\n[02:43.130]\n[02:43.680]\n[02:44.330]I could put a little stardust in your eyes\n[02:47.360]\n[02:47.870]Put a little sunshine in your life\n[02:50.450]\n[02:51.880]Give me a little hope you'll feel the same\n[02:55.430]\n[02:56.140]And I wanna know will I see you again\n[02:59.580]\n[03:00.610]E voglio sapere se tu vieni con me\n[03:01.360]\n[03:01.680]vieni con me\n[03:02.800]\n[03:03.950]\n[03:04.240]Will I see you again\n[03:06.430]\n[03:07.510]\n[03:08.410]Vieni con me\n",	 
	 },
    {"name": "Lost Stars",
     "singer": "Maroon 5",
	 "url":"music/Maroon 5 - Lost Stars.mp3",
	 "lrc":"[00:11.710]Please don't see just a boy caught up in dreams and fantasies\n[00:23.680]Please see me reaching out for someone I can see\n[00:33.750]Take my hand let's see where we wake up tomorrow\n[00:39.490]Best laid plans sometimes it's just a one night stand\n[00:45.310]I'd be damned Cupid's demanding back his arrow\n[00:51.960]So let's get drunk on our tears and\n[00:58.320]God, tell us the reason youth is wasted on the young\n[01:04.500]It's hunting season and the lambs are on the run\n[01:12.410]Searching for meaning\n[01:15.280]But are we all lost stars, trying to light up the dark?\n[01:28.150]Who are we? Just a spec of dust within the galaxy\n[01:39.550]Woe is me if we're not careful turns into reality\n[01:49.930]Don't you dare let all these memories bring you sorrow\n[01:55.860]Yesterday I saw a lion kiss a deer\n[02:01.440]Turn the page maybe we'll find a brand new ending\n[02:07.190]Where we're dancing in our tears and\n[02:14.660]God, tell us the reason youth is wasted on the young\n[02:22.370]It's hunting season and the lambs are on the run\n[02:28.260]Searching for meaning\n[02:31.410]But are we all lost stars, trying to light up the dark?\n[02:44.720]and I thought I saw you out there crying\n[02:49.650]and I thought I heard you call my name\n[02:55.730]and I thought I heard you out there crying\n[03:00.680]Just the same\n[03:08.080]God,give us the reason youth is wasted on the young\n[03:15.080]It's hunting season and the lambs are on the run\n[03:20.970]Searching for meaning\n[03:24.150]But are we all lost stars trying to light up the dark?\n[03:37.230]And I thought I saw you out there crying\n[03:42.930]And I thought I heard you call my name\n[03:48.810]And I thought I heard you out there crying\n[03:56.110]But are we all lost stars, trying to light up the dark?\n[04:05.500]Are we all lost stars trying to light up the dark?\n",
	 },

	];
	$scope.new_songs= [
	{"name": "Right Now (Na Na Na)",
    "singer": "Akon",
	"url":"music/Akon - Right Now (Na Na Na).mp3",
	"lrc":"[00:14.970]It's been so long\n[00:18.200]That I haven't seen your face\n[00:22.070]I'm tryna' be strong\n[00:24.400]But the strength I have is washing away\n[00:29.060]It won't be long before I get you by my side\n[00:36.310]And just hold you, tease you, squeeze you til\n[00:40.180]What's been on my mind\n[00:43.000]I wanna make up right na na na\n[00:46.200]I wanna make up right na na na\n[00:49.570]Wish we never broke up right na na na\n[00:53.220]We need to link up right na na na\n[00:56.730]I wanna make up right na na na\n[01:00.060]I wanna make up right na na na\n[01:03.510]Wish we never broke up right na na na\n[01:07.069]We need to link up right na na na\n[01:10.630]Girl, I know mistakes were made between us two\n[01:18.020]And we show our eyes that now even says somethings were true\n[01:24.940]Why'd you go and haven't seen my girl since then\n[01:31.400]Why can it be the way it was\n[01:35.040]'Cause you were my homie lover friend\n[01:38.360]I wanna make up right na na na\n[01:42.100]I wanna make up right na na na\n[01:45.270]Wish we never broke up right na na na\n[01:48.760]We need to link up right na na na\n[01:52.260]I wanna make up right na na na\n[01:55.779]I wanna make up right na na na\n[01:59.160]Wish we never broke up right na na na\n[02:02.640]We need to link up right na na na\n[02:07.000]I can't lie\n[02:07.900]I miss you much\n[02:09.310]Watching everyday you goes by\n[02:11.300]I miss you much\n[02:12.360]Til i get you back I m gonna try\n[02:15.300]Yes I miss you much\n[02:16.300]You are the apple on my eye\n[02:18.420]Girls, I miss you much\n[02:19.490]I miss you much\n[02:20.980]I can't lie\n[02:22.400]I miss you much\n[02:22.730]Watching everyday you goes by\n[02:25.290]I miss you much\n[02:26.300]'Til i get you back I'm gonna try\n[02:28.800]I miss you much\n[02:29.740]You are the apple on my eye\n[02:32.270]I miss you much\n[02:33.140]I miss you much\n[02:34.280]I wanna make up right na na na\n[02:37.500]I wanna make up right na na na\n[02:40.900]Wish we never broke up right na na na\n[02:44.430]We need to link up right na na na\n[02:48.010]I wanna make up right na na na\n[02:51.330]I wanna make up right na na na\n[02:54.770]Wish we never broke up right na na na\n[02:58.310]We need to link up right na na na\n[03:02.110]I want you to fly with me\n[03:04.310]Want you to fly\n[03:05.390]I miss how you lie with me\n[03:07.370]Ohh miss how you lie\n[03:09.500]I wish you could dine with me\n[03:10.960]Wish you could dine\n[03:12.560]Once that would grind with me\n[03:14.340]Ohhh One that would grind （yeah）\n[03:16.000]I want you to fly with me\n[03:17.670]Want you to fly\n[03:19.080]I miss how you lie with me\n[03:21.310]Miss how you lie\n[03:23.700]I wish you could dine with me\n[03:24.700]Wish you could dine with me\n[03:26.210]One that would grind with me\n[03:28.180]Ohh One that would grind with me\n[03:29.750]I wanna make up right na na na\n[03:33.040]I wanna make up right na na na\n[03:36.570]Wish we never broke up right na na na\n[03:40.210]We need to link up right na na na\n[03:43.930]I wanna make up right na na na na\n[03:47.040]I wanna make up right na na na\n[03:50.450]Wish we never broke up right na na na\n[03:54.070]We need to link up right na na na\n",
	},
	{"name": "Blank Space Style",
    "singer": "Louisa Wendorff,Devin Dawson",
	"url":"music/Blank Space Style.mp3",
	"lrc": "[00:07.59]I got that James Dean day dream look in my eye\n[00:09.30](So it’s gonna be forever)\n[00:11.02](Or it’s gonna go down in flames)\n[00:12.37]You got that red lip classic thing that I like\n[00:13.71](You can tell me when it’s over)\n[00:15.20](If the high was worth the pain)\n[00:17.08]And when we go crashing down, we come back every time\n[00:18.28](Got a long list of ex-lovers)\n[00:19.92](They’ll tell you I’m insane)\n[00:21.67]Never go out of style\n[00:22.98](‘Cause you know I love the players)\n[00:24.45]Out of style\n[00:25.86](And you love the game)\n[00:31.27]Midnight, you come and pick me up\n[00:36.02]No headlights\n[00:40.89]Long drive, could end in burning flames or paradise\n[00:50.42]‘Cause we’re young and we’re reckless\n[00:52.81]We’ll take this way too far\n[00:55.09]It’ll leave you breathless\n[00:57.29]Or with a nasty scar\n[00:59.69]Got a long list of ex-lovers\n[01:02.02]They’ll tell you I’m insane\n[01:04.34]But I’ve got a blank space, baby\n[01:08.10]And I’ll write your name\n[01:08.06]I got that James Dean day dream look in my eye\n[01:12.74]You got that red lip classic thing that I like\n[01:17.35]When we go crashing down, we come back every time\n[01:22.40]Never go out of style\n[01:24.85]Out of style\n[01:27.06]Fade into view, it’s been a while since I have even heard from you\n[01:36.37]I should just tell you to leave cause I\n[01:39.27]Know exactly where it leads but I\n[01:41.12]Watch us go round and round each time\n[01:45.22]I got that James Dean day dream look in my eye\n[01:46.82](So it’s gonna be forever)\n[01:48.58](Or it’s gonna go down in flames)\n[01:50.43]You got that red lip classic thing that I like\n[01:51.62](You can tell me when it’s over)\n[01:53.41](If the high was worth the pain)\n[01:54.97]And when we go crashing down, we come back every time\n[01:56.31](Got a long list of ex-lovers)\n[01:58.04](They’ll tell you I’m insane)\n[02:00.08]Never go out of style\n[02:01.39](‘Cause you know I love the players)\n[02:02.80]Out of style\n[02:04.26](And you love the game)\n[02:04.45]I got that long hair, slicked back, white t-shirt.\n[02:05.55](‘Cause we’re young and we’re reckless)\n[02:07.31](We’ll take this way too far)\n[02:08.95]You got that good girl faith and a tight little skirt,\n[02:10.38](It’ll leave you breathless)\n[02:12.10](Or with a nasty scar)\n[02:13.82]We go crashing down, we come back every time.\n[02:15.35](Got a long list of ex-lovers)\n[02:16.47](They’ll tell you I’m insane)\n[02:19.15]Never go out of style\n[02:20.57](But I’ve got a blank space, baby)\n[02:21.84]Out of style\n[02:22.96](And I’ll write your name)\n[02:28.18]Midnight, you come and pick me up\n[02:32.73]No headlights\n[02:37.52]Long drive, could end in burning flames or paradise\n",
	},
	];
	init_number = 5;
	$scope.high_light_lrc;
	$scope.lrc_display_number = 10;
	$scope.songs = $scope.hot_songs;
	$scope.lrc = $scope.hot_songs[0].lrc;
	$scope.current_lrc_number=0;
	$scope.lrc_array;
	parseLyric();
	$scope.current_lrc_array;
	$scope.play_list = $scope.songs;
	$scope.volume_step = 0.05;
	$scope.play_mode = "play_mode_button_repeat";
	$scope.length = $scope.songs.length;
	$scope.music = document.getElementById("music");
	$scope.current_time = document.getElementById("current_time");
	$scope.end_time = document.getElementById("end_time");
	$scope.current_music = document.getElementById("current_music");
	$scope.album=document.getElementById("album");
	$scope.play_button_image=document.getElementById("play_button_image");
	$scope.progress_bar=document.getElementById("progress_bar");
	$scope.current_music_entity=$scope.play_list[0];
	$scope.state = "play_button_play";
	$scope.isPulling = false;
	$scope.isInited = false;
	$scope.position = 0;

	$scope.indexof = function(value) {
        for (var i = 0; i < $scope.getlength(); i++) {
            if ($scope.play_list[i] == value){
				<!-- console.log("将军要找第几个:"+i); -->
                return i;
			}
			
        }
    }
	$scope.getlength = function() {
		<!-- console.log("回皇上长度:"+$scope.play_list.length); -->
        return $scope.play_list.length;
    }
	$scope.getNext = function(value) {
		$scope.pause_album();
		if($scope.play_mode=="play_mode_button_repeat"){
		index = $scope.indexof(value)+1;
		index = index%$scope.getlength();
        return $scope.play_list[index];
		}else if($scope.play_mode=="play_mode_button_repeat_one"){
		<!-- console.log("单曲循环找下一首歌:"); -->
        return value;
		}else if($scope.play_mode=="play_mode_button_random"){
		index = Math.ceil(Math.random()*$scope.getlength()-1);
		<!-- console.log("随机播放找下一首歌:"); -->
        return $scope.play_list[index];
		}
		
    }
	$scope.playNext = function() {
		$scope.select($scope.getNext($scope.current_music_entity));
    }
	$scope.getPrevious = function(value) {
        $scope.pause_album();
		if($scope.play_mode=="play_mode_button_repeat"){
		index = $scope.indexof(value)-1;
		if (index < 0) {
            index += $scope.getlength();
        }
        return $scope.play_list[index];
		}else if($scope.play_mode=="play_mode_button_repeat_one"){
        return value;
		}else if($scope.play_mode=="play_mode_button_random"){
        return $scope.play_list[Math.ceil(Math.random()*$scope.getlength()-1)];
		}
    }
	$scope.playPrevious = function() {
		$scope.select($scope.getPrevious($scope.current_music_entity));
    }
	
	$scope.select=function(song){	
		$scope.init(song);
		$scope.play();
	};
	$scope.click_song=function(song){	
		$scope.play_list = $scope.songs;	
		$scope.select(song);
	};
	$scope.init=function(song){	
	    is_initing = true;
		$scope.lrc=song.lrc;
		<!-- console.log("当前lrc"+$scope.lrc); -->
		parseLyric();
		$scope.current_music_entity = song;
		$scope.current_lrc_number=0;
		<!-- console.log("当前音乐"+$scope.current_music_entity.name); -->
		$scope.current_time.innerHTML = "00:00";
		$scope.end_time.innerHTML = "00:00";
		$scope.current_music.innerHTML=song.name+"<p >"+song.singer+"</p>";
		$scope.music.src=song.url;	
		$scope.music.load();
		$scope.music.ontimeupdate = function() {$scope.update_seekbar($scope.music.currentTime)};
		$scope.music.onended = function() {$scope.playNext()};
		$scope.music.addEventListener("loadeddata", function() {
		$scope.end_time.innerHTML  = $scope.transfer_time($scope.music.duration);
		$scope.progress_bar.max=$scope.music.duration;
		});
		$scope.update_seekbar(0);
		$scope.isInited = true;
		text = "当前播放音乐：《"+song.name+"》";
		$scope.showToast(text,3000);
		is_initing = false;
	};
	$scope.play=function(url){		
		if(!$scope.isInited){
			$scope.init($scope.play_list[0])
		}
		$scope.state="play_button_pause";
		<!-- console.log("play:"); -->
		$scope.play_album();
		$scope.music.play();
		
	};
	$scope.play_album=function(){
		$scope.album.style.animationPlayState="running";
		$scope.album.style.WebkitAnimationPlayState="running";
		$scope.album.style.MozAnimationPlayState="running";
	}
	$scope.pause=function(){
		$scope.state="play_button_play";
		<!-- console.log("pause:"); -->
		$scope.pause_album();
		$scope.music.pause();
	}
	$scope.pause_album=function(){
		$scope.album.style.animationPlayState="paused";
		$scope.album.style.WebkitAnimationPlayState="paused";
		$scope.album.style.MozAnimationPlayState="paused";			
	}
	$scope.change_album=function(){	
		
		if($scope.state=="play_button_pause"){
			$scope.pause();
		}else {
			$scope.play();
		}
	}
	$scope.seek=function(){
		<!-- console.log("seek到某个时间"); -->
		$scope.isPulling = false;	
		if(!$scope.isInited){
			$scope.play($scope.play_list[0]);		
		}
		console.log("seek到某个时间"+$scope.progress_bar.value);
		$scope.current_lrc_number=$scope.get_seeked_current_row($scope.progress_bar.value);
		console.log("老夫找到第句"+$scope.current_lrc_number);
		start = $scope.current_lrc_number;
		end = $scope.current_lrc_number+$scope.lrc_display_number;
		$scope.current_lrc_array=$scope.lrc_array.slice(start,end);
		console.log("搜索区间"+start+","+end);
		$scope.high_light_lrc = $scope.current_lrc_array[0];
		<!-- console.log("老夫检查一番"+$scope.current_lrc_array[0]); -->
		$scope.music.currentTime = $scope.progress_bar.value;
	}
	$scope.pull=function(){
		<!-- console.log("正在拖动"); -->
		$scope.isPulling = true;
	}
	$scope.update_seekbar=function(currentTime){
		if(!$scope.$$phase) { 
		$scope.$apply();
		}
		if(!$scope.isPulling){
			$scope.progress_bar.MaterialSlider.change(currentTime);				
		}
		$scope.current_time.innerHTML  = $scope.transfer_time(currentTime);
		if(!is_initing){
		row = $scope.lrc_array[$scope.current_lrc_number];
		}else{
		row = [0,0];
		}
		<!-- console.log("检查current_lrc_number"+$scope.current_lrc_number);
		<!-- console.log("检查row"+row[0]+","+row[1]); -->
		console.log("检查currentTime"+currentTime);
		if(currentTime>row[0]){	
			console.log("更换歌词"+$scope.current_lrc_number);		
			if($scope.current_lrc_number>=4){
				start = $scope.current_lrc_number-4;
				end = $scope.current_lrc_number+$scope.lrc_display_number-4;
				$scope.current_lrc_array=$scope.lrc_array.slice(start,end);
				$scope.high_light_lrc = $scope.current_lrc_array[4];
				console.log("搜索区间"+start+","+end);	
			}else{
				$scope.high_light_lrc = $scope.current_lrc_array[$scope.current_lrc_number];
			}
			$scope.current_lrc_number+=1;
			
		
		}
	
	}
	$scope.get_seeked_current_row=function(value){
		for(i=0;i<$scope.lrc_array.length;i++){
			row = $scope.lrc_array[i];
			if(value<row[0]){			
				return i-1;
			}
		}
	}
	$scope.volume_up=function(){
		if($scope.music.volume!=1){
			$scope.music.volume+=$scope.volume_step;
		}
		message="当前音量:"+Math.ceil($scope.music.volume*100)+"%";
		$scope.showToast(message,1000);
	}
	$scope.volume_down=function(){
		if($scope.music.volume!=0){
			$scope.music.volume-=$scope.volume_step;
		}
		message="当前音量:"+Math.ceil($scope.music.volume*100)+"%";
		$scope.showToast(message,1000);
	}
	$scope.change_mode=function(){
		var snackbarContainer = document.querySelector('#demo-toast-example');
		var showToastButton = document.getElementById("play_mode_button");
		console.log("改变模式"+$scope.play_mode);
		if($scope.play_mode=="play_mode_button_repeat"){
			$scope.play_mode="play_mode_button_repeat_one";
			console.log("改变模式1"+$scope.play_mode);
			mode="单曲循环";
		}else if($scope.play_mode=="play_mode_button_repeat_one"){
			$scope.play_mode="play_mode_button_random";
			mode="随机播放";
		}else if($scope.play_mode=="play_mode_button_random"){
			$scope.play_mode="play_mode_button_repeat";
			mode="循环播放";
		}
		mode="当前播放模式："+mode;
		$scope.showToast(mode,500);
		}
	$scope.showToast=function(text,time){
		var snackbarContainer = document.querySelector('#demo-toast-example');
		var showToastButton = document.getElementById("play_mode_button");
		console.log("改变模式"+$scope.play_mode);
		var data = {
			message: text,
			timeout: time,
		};
		snackbarContainer.MaterialSnackbar.showSnackbar(data);
		}
	$scope.transfer_time=function(seconds){
		minutes = parseInt(seconds/60);
		seconds = parseInt(seconds%60);
		if(minutes<10){
			minutes = "0"+minutes;
		}
		if(seconds<10){
			seconds = "0"+seconds;
		}
		return minutes+":"+seconds;
	}
	$scope.swit_new_songs=function(){
		$scope.songs=$scope.new_songs;
	}
	$scope.swit_hot_songs=function(){
		$scope.songs=$scope.hot_songs;
	}
	
	function parseLyric() {
		if(typeof($scope.lrc_array)!= 'undefined'){
			$scope.lrc_array.length = 0;
		}else{
			$scope.lrc_array = new Array();
		}
		lyric = $scope.lrc.split('\n');
		var _l = lyric.length; 
		for(i=0;i<_l;i++) {
			d = lyric[i].match(/\[\d{2}:\d{2}((\.|\:)\d{2})\]/g);
			if(d==null){
				d = lyric[i].match(/\[\d{2}:\d{2}((\.|\:)\d{3})\]/g);
			}
			var t = lyric[i].split(d); 
			<!-- console.log("看看t1"+t[0]+","+t[1]); -->
			if(d != null) { 
				var dt = String(d).split(':'); 
				minute = parseInt(dt[0].split('[')[1]);
				second = Math.round(parseFloat(dt[1].split(']')[0]));
				fixed = minute*60+second;
				$scope.lrc_array.push([fixed, t[1]]);

				
			}
		}
		if(typeof($scope.current_lrc_array)=='undefined'){
			$scope.current_lrc_array = new Array();
		}
		$scope.current_lrc_array=$scope.lrc_array.slice(0,$scope.lrc_display_number);
		$scope.high_light_lrc = $scope.current_lrc_array[0];
	}
	});
	
</script>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header is-casting-shadow">  	
		<div aria-expanded="false" role="button" tabindex="0" class="mdl-layout__drawer-button">	
		<img src="stylesheets/resource/ic_toc_white_48dp.png" style="width:3rem;height:3.6rem;background-position:cener;"/>
		</div>
		<div class="mdl-layout__header-row" >
      	<span class="mdl-layout-title" id="title">
			OnePlayer
		</span>		
		<nav class="mdl-navigation 	mdl-layout--large-screen-only">
			<a class="mdl-navigation__link text" href="" id="newsongs" ng-click="swit_new_songs()">新歌榜</a>
			<a class="mdl-navigation__link text" href="" id="hotsongs" ng-click="swit_hot_songs()">热歌榜</a>
		</nav>
		<!-- Add spacer, to align navigation to the right -->
		<div class="mdl-layout-spacer"></div>
		<!-- Navigation. We hide it in small screens. -->
		
		<nav class="mdl-navigation 	mdl-layout--large-screen-only">
			<a class="mdl-navigation__link text" href=""></a>
			<a class="mdl-navigation__link text" href=""></a>
			<a class="mdl-navigation__link text" href=""></a>
			<a class="mdl-navigation__link text" href=""></a>
		</nav>
		</div>
    </header>
    <div class="mdl-layout__drawer" aria-hidden="true">
		<span class="mdl-layout-title text">OnePlayer</span>
		<nav class="mdl-navigation">
			<a class="mdl-navigation__link text" href="">更多功能敬请期待</a>
			<a class="mdl-navigation__link text" href=""></a>
			<a class="mdl-navigation__link text" href=""></a>
			<a class="mdl-navigation__link text" href=""></a>
		</nav>
    </div>
  	<main class="mdl-layout__content">
    	<div class="page-content">
		<!-- Your content goes here -->
			<div >		
				<div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
					<div class="mdl-snackbar__text" class="text"></div>
				<button class="mdl-snackbar__action" type="button"></button>
				</div>
				<div id="album"></div>
				<div id="current_music_container" >
					<div id="current_music" class="text">
					OnePlayer
					<p class="text">聆听音乐，洞彻真谛</p>
					</div>
				</div>
				<div id="controll_bar" >
					<div id="current_time" class="text">
						00:00
					</div>	
					<div id="slider_container" >					
						<input class="mdl-slider mdl-js-slider" type="range"
				min="0" max="100" value="0" tabindex="50" id="progress_bar" ng-click="seek()" ng-mousedown="pull()"/>	
						
					</div>
					<div id="end_time" class="text">
						00:00
					</div>
				</div>	
				<div id="button_container" >
					<button class="mdl-button mdl-js-button controll_button" id="previous_button" ng-click="playPrevious()">
					</button>
					<button class="mdl-button mdl-js-button controll_button" id="{{state}}" ng-click="change_album()" >
					</button>
					<button class="mdl-button mdl-js-button controll_button" id="next_button" ng-click="playNext()" >
					</button>
					<button class="mdl-button mdl-js-button controll_button" id="{{play_mode}}" ng-click="change_mode()">
					</button>
					<button class="mdl-button mdl-js-button controll_button" id="volume_down_buton" ng-click="volume_down()">
					</button>
					<button class="mdl-button mdl-js-button controll_button" id="volume_up_button" ng-click="volume_up()">
					</button>
					
				</div>
				<div id="music_list" >
					<form action="#" id="search_bar">				
						<div class="mdl-textfield mdl-js-textfield" >
						<!--Sidebar content-->
						<!-- Textfield with Floating Label -->
						<input class="mdl-textfield__input" type="text"  ng-model="query"/>
						<label class="mdl-textfield__label" for="search_bar">歌名、歌手</label>
						</div>
					</form>
					
					<ul>
						<li ng-repeat="song in songs | filter:query " >
							<a>
								<img src="stylesheets/resource/sound.png" style="width:1.5rem" ng-show="song==current_music_entity"/>
								<font size="4" ng-click="click_song(song)" class="text_normal">			
									{{song.name}}
								</font>	
							</a>
							<p class="text">{{song.singer}}</p>
						</li>
					</ul>
				</div>
				<div id="lrc_container" >
					<ul>
						<li ng-repeat="lrc in current_lrc_array" ng-class="{true:'high_light_lrc', false: 'lrc_row'}[lrc==high_light_lrc]">
							<font size="4" class="lrc_row">			
								{{lrc[1]}}
							</font>	
						</li>
					</ul>
				</div>
			</div>
		</div>
	</main>
</div>
	
	<audio id="music" preload="auto">
		<source src="Blank Space Style.mp3" type="audio/mp3">
		<embed height="100" width="100" src="Blank Space Style.mp3"/>  
	</audio>
</head>

    
</html>